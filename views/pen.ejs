<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link type="text/css" rel="stylesheet" href="/stylesheets/materialize.css" media="screen,projection" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/pen.css' />
</head>

<body>
    <header>

        <div id="pen-view-header" class="valign-wrapper">
            <img id="pen-logo" src="/images/codepen-logo.svg" />
            <div id="pen-info">
                <div id="pen-name-editable" class="valign-wrapper">
                    <div id="pen-name-show-container">
                        <span id="pen-name-value"><%= title %>
                        </span>
                        <a id="edit-pen-name" href="#"><i class="material-icons">edit</i></a>
                    </div>
                    <div id="pen-name-edit-container">
                        <input minlength="1" name="penName" id="penName" maxlength="30" type="text" value="<%= title %>"
                            required="true" class="validate" />
                        <span><a id="save-pen-name" href="#"><i class="material-icons">save</i></a></span>
                    </div>
                </div>
                <div id="pen-author-name">
                    <span>A PEN BY <a href="#"><%= username %></a></span>
                </div>
            </div>
            <div id="pen-view-options" class="right-align">
                <button id="" class="btn"><i class="material-icons">favorite</i>
                </button>
                <button id="save-pen" class="btn waves-effect"><i class="material-icons">cloud</i>Save
                </button>
                <button id="" href="#pen-settings-modal" class="waves-effect btn modal-trigger"><i
                        class="material-icons">settings</i>Settings
                </button>
                <button id="" class="waves-effect btn dropdown-trigger" data-target='view-dropdown'><i
                        class="material-icons">visibility</i>Change View
                </button>



            </div>

                            <!-- Pen Settings Modal Structure -->
                            <div id="pen-settings-modal" class="modal modal-fixed-footer">
                                <div class="modal-content">
                                    <div class="row">
                                        <span class="modal-title">Pen Settings</span>
                                        <span class="modal-exit"><a class="modal-close" href="#">
                                                <i class="material-icons">cancel</i></a>
                                    </div>
                                    </span>
                                    <div class="row">
                                        <div class="col s2">
                                            <ul class="tabs">
                                                <li class="tab col s12"><a href="#tab-html">HTML</a></li>
                                                <li class="tab col s12"><a href="#tab-css">CSS</a></li>
                                                <li class="tab col s12"><a href="#tab-js">JS</a></li>
                                                <!-- <li class="tab col s12"><a href="#tab-details">Pen Details</a></li> -->
                                            </ul>
                                        </div>
                                        <div class="col s10">
                                            <div class="modal-tab" id="tab-html" class="col s12">
                                                <div>
                                                    <p>Add Class(es) to &lt;html&gt;  
                                                        <span class="help-container-icon">
                                                            <a target="_blank"><i class="material-icons">help_outline</i></a>
                                                        </span>
                                                    </p>
                                                    <input name="htmlAddClass" type="text" value="?" class="html-input"/> 
                                                    <p>Stuff for &lt;head&gt;
                                                        <span class="help-container-icon">
                                                            <a target="_blank"><i class="material-icons">help_outline</i></a>
                                                        </span>
                                                    </p>
                                                    <textarea name="htmlHeadClass" rows="5" type="text" value="?" class="html-input"></textarea>
                                                    
                                                </div>
                                            </div>
                                            <div class="modal-tab" id="tab-css" class="col s12">
                                                <div>
                                                    <p>Add External Stylesheets/Pens</p>
                                                    <p>Any URL's added here will be added as
                                                        <link>s in order, and before the CSS in the editor. </p>
                                                </div>
                                                <div>
                                                    <ul id="modal-css-externals" class="external-collection collection with-header">
                                                    <!-- Should be dynamically generated -->
                                                    </ul>
                                                    <button class="waves-effect externals-list-add" id="modal-css-externals-add">
                                                        <p>+ add another resource</p>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="modal-tab" id="tab-js" class="col s12">
                                                <div>
                                                    <p>Add External Scripts/Pens</p>
                                                    <p>Any URL's added here will be added as &lt;script&gt;s in order, and run
                                                        before the JavaScript in the editor. </p>
                                                        <ul id="modal-js-externals" class="external-collection collection with-header">
                                                            <!-- Should be dynamically generated -->
                                                            </ul>
                                                            <button class="waves-effect externals-list-add" id="modal-js-externals-add">
                                                                <p>+ add another resource</p>
                                                            </button>
                                                </div>
                                            </div>
                                            <!-- <div class="modal-tab" id="tab-details" class="col s12">
                                                <div>
                                                    <h6>Pen Title</h6>
                                                    <input type="text" placeholder="Untitled" />
                                                    <h6>Pen Description</h6>
                                                    <textarea></textarea>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <a id="modal-stage-update" class="modal-close waves-effect waves-green btn-flat">Save and Close</a>
                                </div>
                            </div>
            
                            <!-- Dropdown Structure -->
                            <ul id='view-dropdown' class='dropdown-content collection with-header'>
                                <li class="collection-header">
                                    <h6>Open this Pen in:</h6>
                                </li>
                                <a href="#!" class="collection-item active"><span class="left-align">Editor View</span>
                                    <span class="secondary-content valign-wrapper">
                                        <span class="collection-link">/pen/</span>
                                        <i class="material-icons">help_outline</i>
                                    </span>
                                </a>
                                <a href="#!" class="collection-item"><span class="left-align">Details View</span>
                                    <span class="secondary-content valign-wrapper">
                                        <span class="collection-link">/details/</span>
                                        <i class="material-icons">help_outline</i>
                                    </span>
                                </a>
                                <a href="#!" class="collection-item"><span class="left-align">Full Page View</span>
                                    <span class="secondary-content valign-wrapper">
                                        <span class="collection-link">/full/</span>
                                        <i class="material-icons">help_outline</i>
                                    </span>
                                </a>
                                <a href="#!" class="collection-item"><span class="left-align">Debug Mode</span>
                                    <span class="secondary-content valign-wrapper">
                                        <span class="collection-link">/debug/</span>
                                        <i class="material-icons">help_outline</i>
                                    </span>
                                </a>
            
                                <li class="divider" tabindex="-1"></li>
            
                                <li class="collection-header">
                                    <h6>Direct Code Links:</h6>
                                </li>
            
                                <div id="code-link-collection" class="row">
                                    <a href="#!" class="code-link">.html</a>
                                    <a href="#!" class="code-link">.css</a>
                                    <a href="#!" class="code-link">.js</a>
                                </div>
            
                                <li class="divider" tabindex="-1"></li>
            
                                <li class="collection-header">
                                    <h6>Editor Layout:</h6>
                                </li>
            
                                <div id="editor-layout-collection" class="row">
                                    <div class="layout-link-container col s4">
                                        <a href="#!" class="layout-link valign-wrapper"><i class="material-icons">dashboard</i></a>
                                    </div>
                                    <div class="layout-link-container col s4">
                                        <a href="#!" class="layout-link valign-wrapper active"><i
                                                class="material-icons">dashboard</i></a>
                                    </div>
                                    <div class="layout-link-container col s4">
                                        <a href="#!" class="layout-link valign-wrapper"><i class="material-icons">dashboard</i></a>
                                    </div>
                                </div>
            
            
            
                            </ul>

            <div id="profile-image">
                <a class='dropdown-trigger' href='#' data-target='profile-dropdown'>
                    <img src="/images/profile-sample.jpg">
                </a>
                <!-- Dropdown Structure -->
                <ul id='profile-dropdown' class='dropdown-content'>
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="#">Profile</a></li>
                    <li class="divider" tabindex="-1"></li>
                    <li><a href="/pen">New Pen</a></li>
                    <li class="divider" tabindex="-1"></li>
                    <li><a href="#!"><i class="material-icons">view_module</i>Settings</a></li>
                    <li><a href="/logout"><i class="material-icons">cloud</i>Log out</a></li>
                </ul>
            </div>

        </div>

    </header>

    <main>

        <div id="editor-group" class="row">
            <div id="editor-1" class="col resizable-editor">
                <div class="editor-top-row">
                    <span class="editor-tool">
                        <a id="modal-html-link" href="#pen-settings-modal" class="waves-effect btn modal-trigger"><i class="material-icons">settings</i></a>
                    </span>
                    <span class="editor-name">HTML</span>
                    <span class="editor-drop">
                        <a href="#" class="btn waves-effect"><i class="material-icons">keyboard_arrow_down</i></a>
                    </span>
                </div>
                <div id="editor-1-ide" class="editor-monaco"></div>
            </div>
            <div id="editor-resize-1" class="col vertical-resize-control"></div>
            <div id="editor-2" class="col resizable-editor">
                <div class="editor-top-row">
                    <span class="editor-tool">
                        <a id="modal-css-link" href="#pen-settings-modal" class="waves-effect btn modal-trigger"><i class="material-icons">settings</i></a>
                    </span>
                    <span class="editor-name">CSS</span>
                    <span class="editor-drop">
                        <a href="#" class="btn waves-effect"><i class="material-icons">keyboard_arrow_down</i></a>
                    </span>
                </div>
                <div id="editor-2-ide" class="editor-monaco"></div>

            </div>
            <div id="editor-resize-2" class="col vertical-resize-control"></div>
            <div id="editor-3" class="col resizable-editor">
                <div class="editor-top-row">
                    <span class="editor-tool">
                        <a id="modal-js-link" href="#pen-settings-modal" class="btn waves-effect modal-trigger"><i class="material-icons">settings</i></a>
                    </span>
                    <span class="editor-name">JS</span>
                    <span class="editor-drop">
                        <a href="#" class="btn waves-effect"><i class="material-icons">keyboard_arrow_down</i></a>
                    </span>
                </div>
                <div id="editor-3-ide" class="editor-monaco"></div>
            </div>
        </div>

        <div id="results-resize" class="horizontal-resize-control">
        </div>

        <div id="result-group" class="row">
            <iframe id="results-window"></iframe>

        </div>
        </div>

    </main>


    <footer>

        <script type="text/javascript" src="/javascripts/jquery-3.4.1.js"></script>
        <script type="text/javascript" src="/javascripts/materialize.js"></script>
        <script type="text/javascript" src="/min/vs/loader.js"></script>

        <!-- Inject these variables so we can use them (can we do this another way) -->
        <% if (userId && username ) { %>
        <script>
            let userId = <%- userId %>;            
            let username = `<%- username %>`;            
        </script>
        <% } %>
        <% if (pen) { %>
        <script>
            let penInfo = <%- pen.penInfo %>;
            let penFragments = <%- pen.penFragments %>;
            let penExternals = <%- pen.penExternals %>;
        </script>
        <% } else { %>
        <script>
             let penExternals = [];
        </script>
        <% } %>
        <script type="text/javascript" src="/javascripts/pen.js"></script>

    </footer>



</body>


</html>